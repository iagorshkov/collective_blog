{% load staticfiles %}
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Blog</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">

    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

  </head>
  <body>

    <div class="container-fluid">
	<div class="row" id="header">
		<div class="col-md-8">
			<h3>
				Мой Блог
			</h3>
		</div>
        <div class="col-md-4">
            {% if user.is_authenticated %}
                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <label class="control-label col-sm-2">Логин:</label>
                        <div class="col-sm-10">
                            <input type="email" class="form-control" id="email" placeholder="Введите логин">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="pwd">Пароль:</label>
                        <div class="col-sm-10">
                            <input type="password" class="form-control" id="pwd" placeholder="Введите пароль">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="submit" class="btn btn-default">Войти</button> <a href="{% url 'register' %}">Зарегистрироваться</a>
                        </div>
                    </div>
                </form>
            {% endif %}
        </div>
	</div>
        {%  block selector %}
    {% endblock %}
	<div class="row">
		<div class="col-md-2">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						Меню
					</h3>
				</div>
				<div class="panel-body">
					<a href="{% url 'blogs_by_rating' page_number=1 %}">Все блоги</a>
				</div>
				<div class="panel-body">
					<a href="{% url 'by_date_all_page' page_number=1 %}">Все посты</a>
				</div>
				<div class="panel-body">
					<a href="{% url 'by_rating_all_page' page_number=1 %}">Лучшие посты</a>
				</div>
			</div>
		</div>
		{%  block content %}
        {% endblock %}
		<div class="col-md-2">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						Лучшие блоги
					</h3>
				</div>
                {% for Blog in Blogs %}
				<div class="panel-body">
					<a href="{% url 'blog_detail' blog_id=Blog.name %}">{{ Blog.full_name }} ({{ Blog.rating }})</a>
				</div>
                {% endfor %}
			</div>
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						Лучшие посты
					</h3>
				</div>
                {% for Post in Posts %}
				<div class="panel-body">
					<a href="{% url 'post_detail' post_id=Post.pk blog_id=Post.blog.name%}">{{ Post }} ({{ Post.rating }})</a>
				</div>
                {% endfor %}
			</div>
		</div>
	</div>
    <div class="row">
		<div class="col-md-2">
		</div>
		<div class="col-md-8">
            {%  block pages %}
            {% endblock %}
		</div>
		<div class="col-md-2">
		</div>
	</div>
</div>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/scripts.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>

    <script>
        var limit = 1000
        $(".text_preview").html(function() {
           if($(this).text().length > limit) {
               var iter = limit;
               while ($(this).text()[iter] != " " && iter < $(this).text().length) {
                   iter++;
               }
               short = $(this).text().substr(0,iter) + '...';
               $(this).text(short);
           }
        });
    </script>

  </body>
</html>